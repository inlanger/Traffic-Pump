
jQuery.fn.extend({everyTime:function(interval,label,fn,times,belay){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times,belay);});},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1);});},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn);});}});jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{'ms':1,'cs':10,'ds':100,'s':1000,'das':10000,'hs':100000,'ks':1000000},timeParse:function(value){if(value==undefined||value==null)
return null;var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseInt(result[1],10);var mult=this.powers[result[2]]||1;return num*mult;}else{return value;}},add:function(element,interval,label,fn,times,belay){var counter=0;if(jQuery.isFunction(label)){if(!times)
times=fn;fn=label;label=interval;}
interval=jQuery.timer.timeParse(interval);if(typeof interval!='number'||isNaN(interval)||interval<=0)
return;if(times&&times.constructor!=Number){belay=!!times;times=0;}
times=times||0;belay=belay||false;if(!element.jQuerytimers)
element.jQuerytimers={};if(!element.jQuerytimers[label])
element.jQuerytimers[label]={};fn.jQuerytimerID=fn.jQuerytimerID||this.guid++;var handler=function(){if(belay&&this.inProgress)
return;this.inProgress=true;if((++counter>times&&times!==0)||fn.call(element,counter)===false)
jQuery.timer.remove(element,label,fn);this.inProgress=false;};handler.jQuerytimerID=fn.jQuerytimerID;if(!element.jQuerytimers[label][fn.jQuerytimerID])
element.jQuerytimers[label][fn.jQuerytimerID]=window.setInterval(handler,interval);if(!this.global[label])
this.global[label]=[];this.global[label].push(element);},remove:function(element,label,fn){var timers=element.jQuerytimers,ret;if(timers){if(!label){for(label in timers)
this.remove(element,label,fn);}else if(timers[label]){if(fn){if(fn.jQuerytimerID){window.clearInterval(timers[label][fn.jQuerytimerID]);delete timers[label][fn.jQuerytimerID];}}else{for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn];}}
for(ret in timers[label])break;if(!ret){ret=null;delete timers[label];}}
for(ret in timers)break;if(!ret)
element.jQuerytimers=null;}}}});if(jQuery.browser.msie)
jQuery(window).one("unload",function(){var global=jQuery.timer.global;for(var label in global){var els=global[label],i=els.length;while(--i)
jQuery.timer.remove(els[i],label);}});jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var result,decode=options.raw?function(s){return s;}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null;};jQuery(document).ready(function(){if(!jQuery.cookie("gplus")){var popupid='trafficpumpwindow';jQuery('#'+popupid).fadeIn();jQuery('body').append('<div id="pumpfade"></div>');jQuery('#pumpfade').css({'filter':'alpha(opacity=80)'}).fadeIn();var popuptopmargin=(jQuery('#'+popupid).height()+10)/2;var popupleftmargin=(jQuery('#'+popupid).width()+10)/2;jQuery('#'+popupid).css({'margin-top':-popuptopmargin,'margin-left':-popupleftmargin});TrafficPumpTimer();}});function hideTrafficPumpWindow(){jQuery.cookie("gplus",true,{path:'window.location.pathname',expires:30});jQuery('#pumpfade , #trafficpumpwindow').fadeOut('fast');}
function TrafficPumpTimer(){jQuery("#trafficpumptimer").everyTime(1000,function(i){if(i==15){jQuery('#pumpfade , #trafficpumpwindow').fadeOut('fast');}else{jQuery(this).text(15-i);}});}